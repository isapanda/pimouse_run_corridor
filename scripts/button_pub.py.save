#!/usr/bin/env python
#!encoding: utf8

import sys, rospy, math, os
from std_srvs.srv import Trigger, TriggerResponse
from std_msgs.msg import UInt16

class Button():
    def  __init__(self):
        pub = rospy.Publisher('button_read', UInt16, queue_size=1)

    def button_read(self):
        d = TriggerResponse()
        try:
            with open("/dev/rtswitch1","r") as f:
                self.log = int(f.read())
                d.success = True
                d.message = "ON" if self.log else "OFF"
                print(self.log)
        except:
           rospy.logerr("cannot read rtswitch1")
        return d

if __name__=='__main__':
    devfile = "/dev/rtswitch1"
    rospy.init_node('button')
    
#    rospy.wait_for_service('/button_read')
    b = Button()
    rospy.spin()
